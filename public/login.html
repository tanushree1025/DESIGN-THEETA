<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Design Theeta ‚Äî Login</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand-purple: #6E44FF;
      --brand-orange: #FF7A00;
      --text: #EDEDED;
      --muted: #B8B8B8;
      --bg: #0B0B0F;
      --bg-image: url("bg.png");
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
      color: var(--text);
      background: url("bg.png") center/cover no-repeat fixed;
    }

    .wrap{ 
      position: relative; 
      z-index: 1; 
      min-height: 100%; 
      display: grid; 
      place-items: center; 
      padding: 6vh 4vw; 
    }
    .card{
      width: 100%;
      max-width: 480px;
      background: rgba(20,20,26,.55);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 22px;
      backdrop-filter: blur(18px) saturate(1.15);
      -webkit-backdrop-filter: blur(18px) saturate(1.15);
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      padding: clamp(20px, 6vw, 42px);
    }
    .brand{ display:flex; gap:14px; align-items:center; margin-bottom: 22px; flex-wrap: wrap; }
    .brand img {
      width: 52px;
      height: 52px;
      border-radius: 12px;
      object-fit: contain;
      background: white;
      padding: 4px;
    }
    .brand h1{ margin:0; font-weight: 800; font-size: clamp(20px, 4vw, 28px); }
    .tag {
      margin: -4px 0 12px 0; 
      text-align: center; 
      color: var(--muted);
      font-weight: 500;
      font-size: clamp(12px, 2vw, 14px);
    }
    form{ display:grid; gap:14px; margin-top: 18px; }
    .field{ position: relative; }
    .field input{ width: 100%; padding: 14px 44px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16); background: rgba(10,10,14,.55);
      color: var(--text); font-size: 16px;
    }
    .icon{ position:absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity:.8 }
    .toggle-pass{ position:absolute; right: 12px; top: 50%; transform: translateY(-50%);
      border:0; background:transparent; color:#cfcfe4; cursor:pointer;
    }
    .cta{ margin-top: 8px; padding: 14px 18px; border-radius: 14px; border: 0; color: white;
      font-weight: 700; font-size: 16px;
      background-image: linear-gradient(90deg, var(--brand-purple), var(--brand-orange));
      transition: transform .2s ease;
    }
    .cta:hover { transform: scale(1.05); }
    .roles { margin-top: 12px; color: #cfcfe4; font-size: 14px; }
    .roles label { display: block; margin: 6px 0; }
    .slogan{ 
      position: fixed; 
      left: 50%; 
      bottom: 5px; 
      transform: translateX(-50%); 
      font-weight: 800; 
      font-size: clamp(16px, 4vw, 28px); 
      text-align: center;
      padding: 0 10px;
    }

  
    .extra-links {
      margin-top: 14px;
      text-align: center;
      font-size: 14px;
      color: var(--muted);
    }
    .extra-links a {
      color: var(--brand-purple);
      text-decoration: none;
      font-weight: 600;
    }
    .extra-links a:hover {
      text-decoration: underline;
    }
    .extra-links p {
      margin: 6px 0;
    }

    .site-header {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 1000;
    }
    .site-header img {
      height: 100px;
      width: auto;
    }

    @media (max-width: 600px) {
      .card {
        padding: 20px;
      }
      .brand {
        flex-direction: column;
        text-align: center;
      }
      .tag {
        margin: 6px 0 16px 0;
        text-align: center;
      }
      .slogan {
        font-size: clamp(14px, 5vw, 20px);
        bottom: 12px;
      }
      .site-header img {
        height: 70px;
      }
    }
  </style>
</head>
<body>
 
  <header class="site-header">
    <img src="logo2.jpg" alt="The Design Theeta Logo">
  </header>

  <div class="bg" aria-hidden="true"></div>
  <main class="wrap">
    <section class="card" role="dialog" aria-label="Login form">
      <div class="brand">
      
        <img src="logo.jpg.jpg" alt="Design Theeta Logo">
        <h1>THE DESIGN THEETA</h1>
      </div>
      <p class="tag">Designs Driven by Creativity</p>
     <form id="loginForm">
  <label class="field">
    <span class="icon"></span>
    <input id="email" type="email" placeholder="Email" required />
  </label>
  <label class="field">
    <span class="icon"></span>
    <input id="password" type="password" placeholder="Password" required />
    <button type="button" class="toggle-pass" onclick="togglePass()">üëÅ</button>
  </label>

  <div class="roles">
    <p>Select Role:</p>
    <label><input type="radio" name="role" value="admin" required> Admin</label>
    <label><input type="radio" name="role" value="designer"> Designer</label>
    <label><input type="radio" name="role" value="client"> Client</label>
  </div>

  <button class="cta" type="submit">Login</button>

  <!-- Error message -->
  <p id="error" style="color:#FF5555; margin-top:10px;"></p>

  <div class="extra-links">
    <a href="forgot-password.html" class="forgot">Forgot Password?</a>
    <p>Don‚Äôt have an account? <a href="signup.html" class="signup">Sign up</a></p>
  </div>
</form>
<script>
// ‚úÖ Toggle password visibility
function togglePass() {
  const pass = document.getElementById("password");
  const toggleBtn = document.querySelector(".toggle-pass");
  
  if (pass.type === "password") {
    pass.type = "text";
    toggleBtn.textContent = "üôà"; // change icon when visible
  } else {
    pass.type = "password";
    toggleBtn.textContent = "üëÅ"; // change icon when hidden
  }
}

// --- LOGIN ---
const loginForm = document.getElementById("loginForm");
const loginError = document.getElementById("error");

loginForm.addEventListener("submit", async e => {
  e.preventDefault();
  loginError.textContent = "";

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value; // ‚úÖ fixed id here
  const role = document.querySelector('input[name="role"]:checked').value;

  try {
    const res = await fetch("http://localhost:5000/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password, role })
    });
    const data = await res.json();

    if (!res.ok) {
      loginError.textContent = data.msg || "Login failed";
      return;
    }

    localStorage.setItem("token", data.token);
    localStorage.setItem("name", data.name);
    localStorage.setItem("role", data.role);

    if (data.role === "admin") window.location.href = "admin.html";
    else if (data.role === "designer") window.location.href = "employee.html";
    else if (data.role === "client") window.location.href = "client.html";

  } catch (err) {
    console.error(err);
    loginError.textContent = "Server error. Try again.";
  }
});
</script>
</body>
</html>
